# 智能生活記錄與洞察App產品需求文檔 (PRD)

**版本**: 1.0  
**日期**: 2025-09-13  
**狀態**: 草案已鎖定，待定義史詩列表

---

## 一、目標與背景 (Goals and Background Context)

### 目標 (Goals)

- **核心使命**: 打造一個統一入口，幫助用戶無縫記錄、整合生活中的各類信息（文字、語音、圖片、文件、鏈接等）。
- **AI 賦能**: 利用 AI 技術對記錄進行智能處理、組織和分析，發掘數據背後的價值。
- **用戶成長**: 通過回顧與洞察，幫助用戶更好地認識自我、提升效率、養成良好習慣，最終成為更好的自己。

### 背景上下文 (Background Context)

當前市場上的記錄工具功能分散，用戶數據被鎖定在不同平台，且用戶對數據隱私的擔憂日益增加。本项目旨在解决这些痛点，提供一个以“数据本地优先”为核心原则的智能生活记录与洞察应用。它不仅是一个记录工具，更是一个借助 AI 辅助用户进行自我探索和个人成长的私人助手，同时赋予用户对其数据的绝对控制权。

### 變更日誌 (Change Log)

| 日期       | 版本 | 描述               | 作者      |
|------------|------|--------------------|-----------|
| 2025-09-13 | 1.0  | 初始 PRD 草案創建 | John (PM) |

---

## 二、需求 (Requirements)

### 第一部分：功能性需求 (Functional Requirements)

#### 模塊一：添加記錄 (核心入口)

- **FR1**: 用戶可通過一個懸浮的 + 號按鈕作為核心入口，快速發起記錄 [cite: 需求.md]。
- **FR2**: 文字輸入應在富文本編輯器中進行，支持 Markdown 語法、待辦列表 (Checkbox)、引用、高亮、字體加粗/斜體 [cite: 需求.md]。
- **FR3**: AI 需在用戶輸入時，實時或完成後分析內容，以自動推薦或創建相關標籤 [cite: 需求.md]。
- **FR4**: AI 需能識別內容中的行動點（Action Items），並以卡片形式提示用戶“是否創建為待辦事項？” [cite: 需求.md]。
- **FR5**: 對於AI識別的行動點，如果用戶選擇“是”，系統需能自動抓取關鍵信息（如“明天下午3點前完成報告”）創建待辦，並自動設定提醒時間 [cite: 需求.md]。
- **FR6**: 用戶能夠創建和使用筆記模板（例如：會議紀要、晨間日記、讀書筆記等） [cite: 需求.md]。
- **FR7**: 點擊語音記錄後應立即開始錄音，界面需清晰顯示錄音時長和聲波動畫 [cite: 需求.md]。
- **FR8**: 錄音功能需支持暫停和繼續操作 [cite: 需求.md]。
- **FR9**: 錄音完成後，需在後台進行語音轉文字處理，並在轉錄完成後發送通知提醒用戶 [cite: 需求.md]。
- **FR10**: 系統必須提供音文對照播放功能，允許用戶點擊轉錄文本的任意部分，即可從對應的音頻時間點開始播放 [cite: 需求.md]。
- **FR11**: AI 需能自動區分並標記出多人對話中的不同發言人（Speaker Diarization） [cite: 需求.md]。
- **FR12**: 添加鏈接時，系統需能自動檢測剪貼板中的鏈接並詢問用戶是否粘貼 [cite: 需求.md]。
- **FR13**: AI 需自動抓取鏈接的標題、摘要和縮略圖，生成鏈接預覽卡片 [cite: 需求.md]。
- **FR14**: AI 需分析鏈接指向的網頁內容，並提取關鍵詞作為建議標籤 [cite: 需求.md]。
- **FR15**: 用戶可以在鏈接卡片上添加自己的筆記和評論 [cite: 需求.md]。
- **FR16**: 系統需提供文件掃描功能，支持單頁和多頁連續拍攝模式 [cite: 需求.md]。
- **FR17**: 掃描功能需具備邊緣自動檢測、裁剪、以及多種濾鏡（如增強、灰度） [cite: 需求.md]。
- **FR18**: 掃描件保存後，系統需自動進行 OCR 文字識別，識別出的文本需支持複製和搜索 [cite: 需求.md]。
- **FR19**: 用戶可選擇將掃描結果保存為圖片或 PDF 文件格式 [cite: 需求.md]。
- **FR20**: 用戶能從本地文件系統或主流雲服務（iCloud, Google Drive等）選擇並上傳文件 [cite: 需求.md]。
- **FR21**: 支持的文件類型需明確包括：PDF, Word, Excel, PPT, TXT, MD, 主流圖片和音頻格式 [cite: 需求.md]。
- **FR22**: AI 需對上傳的文檔內容進行分析，並自動生成3-5個要點（Bullet Points）作為內容總結 [cite: 需求.md]。
- **FR23**: 上傳文件的全文內容必須被索引，以支持後續的全局搜索 [cite: 需求.md]。

---

### 模塊二：時間軸記錄 (核心視圖)

- **FR24**: 所有記錄完成後，都將自動保存在時間軸頁面，並以倒序時間流呈現 [cite: 需求.md]。
- **FR25**: 時間軸需默認展示當天的記錄，並提供日期選擇功能以查看歷史任意一天的記錄 [cite: 需求.md]。
- **FR26**: 用戶必須能夠通過點擊某個標籤，快速查看所有包含該標籤的記錄 [cite: 需求.md]。
- **FR27**: 提供可選的、需用戶明確授權的手機相冊同步功能，並允許用戶只選擇特定相冊進行同步 [cite: 需求.md]。
- **FR28**: 對於同步的照片，AI 需能進行內容識別並自動打上分類標籤（如：#美食, #旅行, #寵物, #截圖） [cite: 需求.md]。
- **FR29**: 同步的照片在時間軸中需以照片牆或小圖預覽的形式按天/月聚合展示，以節省垂直空間 [cite: 需求.md]。

---

### 模塊三：待辦 (GTD) 與習慣 (Habit)

- **FR30**: 待辦頁籤需能展示所有待辦事項，並支持按日期、優先級、所屬項目/清單進行分組和排序 [cite: 需求.md]。
- **FR31**: 待辦事項需支持創建子任務 [cite: 需求.md]。
- **FR32**: 待辦模塊需提供看板視圖，允許任務在“待處理”、“進行中”、“已完成”等狀態間拖拽 [cite: 需求.md]。
- **FR33**: 待辦模塊需支持與系統日曆的雙向同步 [cite: 需求.md]。
- **FR34**: 習慣頁籤需支持設定習慣頻率（每日/每周X次/每月X次）和具體目標 [cite: 需求.md]。
- **FR35**: 習慣打卡需支持多種方式（點擊完成、記錄數字、寫簡短筆記） [cite: 需求.md]。
- **FR36**: 習慣模塊需自動追踪並可視化習慣堅持天數（Streak） [cite: 需求.md]。
- **FR37**: 用戶可以為習慣設定提醒，並自定義激勵性話語 [cite: 需求.md]。
- **FR38**: 當用戶中斷習慣時，系統需提供溫和的鼓勵和重新開始的引導文案 [cite: 需求.md]。

---

### 模塊四：回顧複盤與 AI 洞察

- **FR39**: 回顧頁籤需提供畫冊視圖或日曆視圖，在日曆上標記有記錄的日子，並可點擊跳轉 [cite: 需求.md]。
- **FR40**: 回顧頁籤需提供數據統計功能，包括記錄熱力圖、標籤雲、字數統計和習慣完成率 [cite: 需求.md]。
- **FR41**: 系統需提供“情緒記錄”功能，並在回顧頁籤中展示“情緒分析圖” [cite: 需求.md]。
- **FR42**: 回顧頁籤需包含“那年今日”和“隨機漫步”功能 [cite: 需求.md]。
- **FR43**: AI 洞察頁籤需提供一個模板庫，內置每日三問、每周複盤、SWOT分析等模板 [cite: 需求.md]。
- **FR44**: 用戶需能夠創建、編輯和分享自己的洞察模板 [cite: 需求.md]。
- **FR45**: AI 需能根據用戶選擇的模板和時間範圍，自動抓取相關記錄並生成一份經過分析和提煉的結構化洞察報告 [cite: 需求.md]。
- **FR46**: AI 需能主動發現用戶記錄中的潛在模式和關聯，並以建議的形式推送給用戶（例如：“發現你記錄‘焦慮’後常聽音樂，要不要創建‘聽音樂放鬆’的習慣？”） [cite: 需求.md]。

---

### 模塊五：協作與分享

- **FR47**: 用戶可以分享單條記錄，並生成一個唯讀的網頁鏈接或圖片 [cite: 需求.md]。
- **FR48**: 系統需支持創建共享空間（Space），以實現家庭或團隊的共同記錄 [cite: 需求.md]。

---

### 模塊六：核心體驗功能

#### 搜索功能

- **FR49**: 系統必須提供全局全文搜索功能，搜索範圍需覆蓋所有記錄的標題、正文、標籤，以及圖片內的OCR文本和已索引的文件內容 [cite: 需求.md]。
- **FR50**: 搜索框在用戶輸入時，必須提供智能建議，包括相關的標籤和歷史搜索詞 [cite: 需求.md]。
- **FR51**: 搜索功能必須支持高級操作符，例如通過 tag:#工作 進行標籤篩選，以及通過 -tag:#會議 排除特定內容 [cite: 需求.md]。

#### 國際化 (Internationalization)

- **FR52**: 應用的全部前端界面、內置模板和引導文案必須支持多語言 [cite: 需求.md]。
- **FR53**: 應用需能根據用戶設備系統設置自動匹配顯示語言 [cite: 需求.md]。

---

### 模塊七：設置與數據管理

- **FR54**: 設置中需提供賬戶管理和雲端同步狀態查看功能 [cite: 需求.md]。
- **FR55**: 設置中需提供“AI 服務設定”頁面，允許用戶選擇主流 AI 服務商、填入自己的 API Key 並選擇具體模型 [cite: 需求.md]。
- **FR56**: 設置中需提供精細化的通知管理功能，用於控制各類提醒 [cite: 需求.md]。
- **FR57**: 設置中需提供個性化選項，包括淺色/深色模式、字體大小、時間軸顯示密度 [cite: 需求.md]。
- **FR58**: 用戶必須能在應用設置中手動切換顯示語言 [cite: 需求.md]。
- **FR59**: 用戶可通過密碼或生物識別（Face ID/指紋）來鎖定應用 [cite: 需求.md]。
- **FR60**: 用戶能將所有數據導出為 Markdown, JSON, PDF 等開放格式 [cite: 需求.md]。
- **FR61**: 用戶能從 Notion, Apple Reminders/Calendar, Google Keep 等服務導入數據 [cite: 需求.md]。

---

### 模塊八：高級AI功能

- **FR62**: 記憶鏈: AI 需能自動將不同時間點、不同類型的相關記錄鏈接起來，在用戶查看某條記錄時，主動呈現上下文相關的其他記錄。
- **FR63**: 語氣與情感分析: AI 需能自動分析文本和語音中的情感傾向，為情緒分析圖提供數據源，並分析長期趨勢。
- **FR64**: 智能摘要Pro: AI 需支持對任意記錄、文件或時間段內的記錄，生成多種類型（如“一句話總結”、“Q&A”、“高管報告”）的摘要。
- **FR65**: 事件自動化識別: AI 需能掃描用戶記錄，自動識別重大生活事件（如旅行、項目里程碑），並提示用戶創建事件合輯。
- **FR66**: 目標逆向工程: AI 需能根據用戶設定的長期目標，分析其現狀，並自動將目標分解為可執行的週度計劃。
- **FR67**: 認知偏誤檢測器: AI 需能識別用戶寫作模式中可能存在的常見認知偏誤，並以溫和、啟發性的方式提問以促進反思。
- **FR68**: 人生章節: AI 需能定期為用戶生成精美的“人生章節”報告，總結過去一段時間的關鍵事件、情緒趨勢和成就。
- **FR69**: AI 助理對話界面: 系統需提供一個對話式界面，允許用戶用自然語言查詢自己的所有數據。
- **FR70**: 智能模板填充: 當用戶使用模板時，AI 需能利用上下文信息（如日曆、附件）預先填充模板的相關字段。
- **FR71**: 共享空間智能摘要: 對於共享空間，AI 需能定期自動生成“智能摘要”，總結空間內的關鍵動態。

---

### 第二部分：非功能性需求 (Non-Functional Requirements)

- **NFR1 (數據隱私)**: 本地優先 (Local-First)。應用的核心數據必須默認且僅保存在用戶設備本地。雲端僅用於同步數據的加密副本和非敏感賬戶信息 [cite: 需求.md]。
- **NFR2 (安全性)**: 多設備間的數據同步必須採用端到端加密（End-to-End Encryption） [cite: 需求.md]。
- **NFR3 (AI 靈活性)**: 應用不得綁定任何特定的 AI 模型。必須提供開放接口，允許用戶自主配置並使用其信任的 AI 服務提供商的 API Key [cite: 需求.md]。
- **NFR4 (離線可用性)**: 所有核心的記錄和查看功能必須在離線狀態下完全可用。
- **NFR5 (多端支持)**: 應用必須在 iOS、安卓和現代 Web 瀏覽器上提供一致的核心體驗。
- **NFR6 (性能)**: 全局搜索必須快速響應，即使在數據量巨大的情況下也能提供流暢的體驗 [cite: 需求.md]。
- **NFR7 (合規性)**: 對於通話錄音等高風險功能，必須默認關閉，並在用戶啟用前進行強法律風險提示，要求用戶遵守當地法規 [cite: 需求.md]。

---

## 三、用戶界面設計目標 (User Interface Design Goals)

本部分旨在為產品的視覺設計和交互體驗設定高層次的指導原則。

### 總體用戶體驗 (UX) 願景

我們的目標是創造一個 寧靜、智能且高度個人化 的數字空間。用戶界面應給人一種平靜、專注的感覺，讓用戶可以安心地記錄和反思。AI應像一位體貼的助手，在需要時無縫出現提供幫助，在不需要時則安靜地退居幕後，絕不打擾。從文字記錄到語音備忘，再到習慣打卡，所有操作的過渡都應流暢自然，讓用戶感覺一切盡在掌握。

### 核心交互範式

- 懸浮操作按鈕 (+): 這是所有“創造”行為的唯一入口。點擊後應優雅地展開，提供文字、語音、掃描、鏈接等多樣化的記錄選項。
- 卡片式設計: 每一條記錄（筆記、照片、文件）都應以獨立的“卡片”形式存在於時間軸上。為了在承載多樣化信息的同時避免視覺混亂，卡片設計需遵循以下原則：
  - 統一結構，多樣內容: 所有卡片都遵循統一的基礎結構（如標準的頭部和腳部），但在主體區域內展示多樣化的內容，以建立視覺節奏感。
  - 智能聚合與折叠: 對於在短時間內產生的多條相關記錄，AI應能將其智能組合為一個可展開/折叠的“事件卡組”，以保持時間軸的整潔。
  - 用戶可控的顯示密度: 在設置中提供多種顯示密度選項（如舒適、緊湊、極簡模式），允許用戶根據自己的偏好自定義信息的呈現方式。
- 時間軸視圖: 應用默認的主界面是一個無限滾動的時間軸，承載用戶的所有記憶。
- 儀表板式模塊: 對於“待辦”和“習慣”等功能，應採用清晰、可視化的儀表板設計，讓進度和狀態一目了然。
- 自然語言交互: 全局搜索和AI助理對話功能，應允許用戶像與人對話一樣，用自然語言來查詢自己的數據。

### 核心屏幕與視圖

- 主時間軸 (Home/Timeline): 應用的默認主頁，展示當天的記錄，並可輕鬆導航至歷史日期。
- 記錄創建視圖 (Creation View): 一個根據記錄類型（文本編輯器、錄音界面、掃描儀）動態變化的全屏或模態視圖。
- 待辦事項視圖 (GTD View): 包含列表、日曆和看板三種可切換的視圖模式。
- 習慣追踪視圖 (Habit View): 一個展示所有習慣、堅持天數（Streaks）和進度圖表的儀表板。
- 回顧與洞察視圖 (Review & Insights View): 專門用於展示數據可視化圖表（如熱力圖、標籤雲、情緒圖）和AI生成的深度報告。
- 全局搜索視圖 (Search View): 一個獨立於主時間軸的、功能強大的搜索界面，包含過濾器和高級搜索選項。
- 設置 (Settings): 集中管理賬戶、同步、AI服務、通知、外觀和數據導入/導出的地方。

### 無障礙設計 (Accessibility)

合規目標: 產品設計和開發需遵循 WCAG 2.1 AA 級標準，確保應用對所有用戶，包括有視覺、聽覺或運動障礙的用戶，都是可用和友好的。

### 品牌與風格

風格定義 (待定): 目前暫無明確的品牌指南。初步建議採用 極簡主義 (Minimalism) 設計風格，使用柔和、平靜的色彩方案（例如，以深藍、灰白色為主色調），搭配清晰易讀的字體。整體風格應強調內容本身，營造一個無干擾的記錄環境。

### 目標設備與平台

平台支持: 應用需在以下三個平台上提供一致的核心體驗和無縫的數據同步：

- Web Responsive: 適用於所有現代桌面瀏覽器（Chrome, Safari, Firefox, Edge）的響應式網頁應用。
- iOS: 針對 iPhone 和 iPad 進行優化的原生應用。
- Android: 針對主流 Android 手機和平板進行優化的原生應用。

---

## 四、技術假設 (Technical Assumptions)

本部分旨在記錄指導架構設計和開發工作的關鍵技術決策和約束。

### 倉庫結構 (Repository Structure)

- 決策: 採用 Monorepo 結構。
- 理由: 由於產品需要在多個客戶端（iOS, Android, Web）共享核心業務邏輯、數據模型和類型定義，Monorepo 可以極大地簡化依賴管理和代碼複用，確保跨平台的一致性。

### 服務架構 (Service Architecture)

- 決策: 採用 本地優先 (Local-First) + 輕量級後端 的混合架構。
- 理由:
  - 本地優先: 遵循 NFR1 核心原則，所有核心數據處理和存儲都在客戶端本地完成，確保用戶數據主權和應用的離線可用性。（註：核心的記錄、查看和管理功能支持離線，但所有AI輔助功能，根據最新決策，均需聯網通過雲端服務完成。）
  - 輕量級後端 (FastAPI): 後端服務的角色被限定為：1. 處理用戶認證與賬戶管理。2. 存儲和同步端到端加密的數據副本。3. 處理非敏感的協作功能（如共享空間管理）。

### 測試要求 (Testing Requirements)

- 決策: 遵循 完整的測試金字塔 模型。
- 理由: 為了保證成熟應用的穩定性和質量，我們需要單元測試、組件測試、集成測試和端到端 (E2E) 測試。

### 技術棧 (Technology Stack)

- 跨平台框架: React Native (配合 TypeScript)。用於構建 iOS 和 Android 應用，並可通過 React Native for Web 方案覆蓋 Web 端。
- 後端服務: FastAPI (Python)。
- 數據庫: PostgreSQL。
- API 接口: GraphQL。
- 本地部署方案:
  - AI 服務: 默認使用 多模態大模型。
  - 硬件配置: 對於本地部署，建議使用高性能 GPU（如 NVIDIA A100 或 H100）和 64GB+ 內存。
  - 部署方式: 初期不使用容器技術（如Docker）。

### 其他技術假設

- AI 服務調用:
  - 決策: 完全雲端處理。應用內的所有AI任務均通過調用用戶配置的雲端AI服務API來完成。客戶端本身不執行任何本地AI推理。
  - 用戶選擇: 應用內提供配置頁面，允許用戶自主選擇主流AI服務商並輸入API Key。
  - 開發階段: 將使用靈活且兼容的開放API（如硅基流動）進行開發。
  - 多模態模型: 優先採用單一的多模態大模型來統一處理文字、語音、圖像等多種輸入。
  - 模塊化設計: AI服務的調用邏輯將被封裝為獨立模塊，便於未來輕鬆切換或擴展。

---
