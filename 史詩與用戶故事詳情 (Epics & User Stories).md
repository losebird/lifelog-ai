# 史詩與用戶故事詳情 (Epics & User Stories)

**文檔目的**: 本文檔基於已鎖定的PRD，將高層次的史詩（Epics）分解為可執行的用戶故事（User Stories），並為每個故事提供明確的驗收標準（Acceptance Criteria）。這是敏捷開發流程的核心路線圖。

---

## 史詩 1: 基礎設施與核心記錄 (Foundation & Core Recording)

🎯 **目標**: 建立應用的核心架構、用戶系統，並實現最基礎的文字和語音記錄功能，確保產品骨架穩固可用，並為後續所有功能奠定基礎。

### 故事 1.1: 項目初始化與基礎架構搭建

- **用戶故事**: 作為開發團隊，我希望能建立一個包含前端、後端和共享代碼的Monorepo結構，並配置好持續集成/持續部署(CI/CD)的基礎流程，以便我們能夠高效、一致地進行跨平台開發與部署。
- **驗收標準**:
  - 一個新的 Monorepo 倉庫已創建。
  - 倉庫中包含三個初始包：app (React Native 客戶端), server (FastAPI 後端), shared (共享TS類型和邏輯)。
  - 基礎的CI流程已配置，能夠在代碼提交時自動運行Lint檢查和測試。
  - 後端服務可以成功啟動，並返回一個健康的狀態端點 (e.g., /health)。
  - 客戶端應用可以在iOS模擬器、Android模擬器和Web瀏覽器中成功運行並顯示一個初始頁面。

### 故事 1.2: 用戶認證系統

- **用戶故事**: 作為一個新用戶，我希望能安全地註冊賬戶並登錄應用，以便我的數據可以被安全地存儲和同步。
- **驗收標準**:
  - 後端提供用戶註冊和登錄的 GraphQL API 端點。
  - 用戶密碼在存儲到數據庫前必須經過哈希處理。
  - 用戶成功登錄後，會返回用於後續請求認證的 Token。
  - 客戶端提供簡潔的註冊和登錄界面。
  - 應用能安全地在本地存儲用戶的登錄憑證。

### 故事 1.3: 用戶訂閱與權限管理 (新增)

- **用戶故事**: 作為開發團隊，我需要建立一個系統來管理用戶的訂閱狀態（免費/專業版），以便應用可以根據狀態來展示或隱藏對應的AI功能。
- **驗收標準**:
  - 後端能夠安全地處理來自 App Store 和 Google Play 的訂閱收據驗證。
  - 用戶模型中增加一個字段來標識其訂閱狀態（例如 subscription_status: 'free' | 'pro'）。
  - 客戶端應用能夠安全地存儲和刷新用戶的訂閱狀態。
  - 提供一個簡單的付費頁面，引導用戶前往應用商店完成訂閱流程。

### 故事 1.4: 本地數據庫與核心記錄模型

- **用戶故事**: 作為開發團隊，我需要在客戶端建立一個本地數據庫，並定義核心的記錄數據模型，以便應用可以在本地存儲和管理用戶數據，實現離線可用性。
- **驗收標準**:
  - 客戶端已集成一個可靠的本地數據庫解決方案（如 WatermelonDB 或 SQLite）。
  - 核心的 Record 數據模型已在 shared 包中用 TypeScript 定義，包含ID、類型、內容、標籤、創建/更新時間等基礎字段。
  - 應用能夠在本地數據庫中創建、讀取、更新和刪除 Record 條目。
  - 所有數據庫操作即使在設備離線時也能正常執行。

### 故事 1.5: 基礎同步引擎

- **用戶故事**: 作為一個用戶，我希望我在一台設備上創建的記錄，能夠自動、安全地同步到我的另一台設備上。
- **驗收標準**:
  - 客戶端在檢測到網絡連接時，會自動將本地未同步的數據變更推送到後端。
  - 後端接收到數據後，會將其加密並存儲。
  - 其他登錄了同一賬戶的客戶端，能夠從後端拉取到最新的數據變更。
  - 同步過程必須採用端到端加密。

### 故事 1.6: 實現富文本記錄與AI標籤推薦 (Pro)

- **用戶故事**: 作為一個用戶，我希望能通過懸浮按鈕快速創建一條富文本筆記，並且AI能自動為我的筆記推薦標籤，以便我能輕鬆地記錄和組織我的想法。
- **驗收標準**:
  - 主界面有一個懸浮的 + 按鈕。
  - 點擊按鈕後，可以選擇並進入一個功能完善的富文本編輯器。
  - 筆記保存後，會顯示在時間軸的頂部。
  - 在設置頁面，用戶可以配置自己的AI服務API Key。
  - (權限) AI標籤推薦功能僅對“專業版”訂閱用戶可用。對於免費版用戶，應以優雅的方式（如顯示‘Pro’標籤並引導升級）提示此為付費功能。
  - 當“專業版”用戶保存筆記時，應用會調用用戶配置的AI服務，獲取建議標籤並展示給用戶選擇。

### 故事 1.7: 實現語音記錄與轉文字 (Pro)

- **用戶故事**: 作為一個用戶，我希望能快速錄製一段語音備忘，並讓系統自動將其轉換為文字，以便我後續可以搜索和回顧。
- **驗收標準**:
  - 用戶可以通過 + 按鈕選擇並開始語音錄製。
  - 錄製的音頻文件被保存在本地。
  - (權限) 語音轉文字功能僅對“專業版”訂閱用戶可用。
  - “專業版”用戶的應用在後台調用用戶配置的AI服務，將音頻轉換為文本。
  - 轉錄完成後，時間軸上的語音卡片會更新並顯示轉錄的文本內容。
  - 轉錄後的文本內容可被全局搜索。

---

## 史詩 2: 豐富化記錄與智能組織 (Rich Media & Smart Organization)

🎯 **目標**: 擴展應用的記錄能力以支持多種媒體類型，並引入初步的AI組織功能，讓信息捕捉更全面、更智能。

### 故事 2.1: 實現鏈接、掃描與文件記錄 (部分Pro)

- **用戶故事**: 作為一個用戶，我希望能記錄鏈接、掃描物理文檔和上傳數字文件，並讓AI自動處理它們，以便我能將所有類型的數字信息統一存儲。
- **驗收標準**:
  - 用戶可以粘貼鏈接，系統會自動生成預覽卡片 (AI功能為Pro)。
  - 用戶可以使用相機掃描文檔，系統會進行OCR處理，使文本可搜索 (OCR為Pro)。
  - 用戶可以從設備上傳PDF、Word等文件，系統會生成AI摘要 (AI摘要為Pro)。
  - 所有這些記錄類型都會以對應的卡片樣式顯示在時間軸上。
  - 對於免費版用戶，鏈接只顯示URL，掃描件為純圖片，文件只顯示文件名和圖標。

### 故事 2.2: 實現時間軸與標籤瀏覽

- **用戶故事**: 作為一個用戶，我希望能輕鬆地瀏覽我的時間軸，並通過日期選擇器或點擊標籤來快速篩選和查找我關心的記錄。
- **驗收標準**:
  - 時間軸主界面默認顯示當天的所有記錄。
  - 界面頂部提供一個日期選擇器，用戶可以跳轉到任意一天。
  - 每張卡片上顯示的標籤都是可點擊的。
  - 點擊一個標籤後，會進入一個新視圖，只顯示所有包含該標籤的記錄。

### 故事 2.3: 實現手機相冊智能同步 (Pro)

- **用戶故事**: 作為一個用戶，我希望能授權應用同步我的手機相冊，並讓AI自動為照片分類打標籤，以便我能將生活照片無縫融入我的記憶庫。
- **驗收標準**:
  - (權限) 此功能僅對“專業版”訂閱用戶開放。
  - 在用戶首次使用此功能時，會彈出清晰的授權請求和隱私說明。
  - 用戶可以在設置中選擇要同步的特定相冊。
  - 同步的照片會被AI分析並自動添加如 #旅行, #美食 等標籤。
  - 在時間軸上，同一天的多張照片會以聚合的“照片牆”形式展示。

---

## 史詩 3: 行動導向與個人成長 (Action-Oriented & Personal Growth)

🎯 **目標**: 引入待辦事項（GTD）、習慣追踪和情緒記錄模塊，將被動的記錄轉化為主動的個人成長工具。

### 故事 3.1: 實現待辦事項 (GTD) 模塊 (部分Pro)

- **用戶故事**: 作為一個追求效率的用戶，我希望能有一個功能完善的待辦事項模塊，來管理我的所有任務。
- **驗收標準**:
  - 應用中有一個獨立的“待辦”頁籤。
  - 用戶可以在此頁籤中增刪改查任務。
  - 支持設置截止日期、提醒和子任務。
  - 提供列表視圖和看板視圖。
  - (權限) AI從筆記中自動創建待辦事項的功能僅對“專業版”用戶可用。

### 故事 3.2: 實現習慣追踪模塊

- **用戶故事**: 作為一個希望養成好習慣的用戶，我希望能有一個模塊來幫助我設定目標、每日打卡並追踪我的進度。
- **驗收標準**:
  - 應用中有一個獨立的“習慣”頁籤。
  - 用戶可以創建習慣，並設定頻率和目標。
  - 提供多種打卡方式。
  - 系統會自動計算並展示用戶的“堅持天數”(Streak)。

### 故事 3.3: 實現情緒記錄與分析 (部分Pro)

- **用戶故事**: 作為一個關注內心成長的用戶，我希望能方便地記錄我每天的情緒，並在一段時間後回顧我的情緒波動趨勢。
- **驗收標準**:
  - 用戶可以在記錄時或單獨記錄當前的情緒（如通過選擇表情）。
  - 在“回顧”模塊中，新增一個“情緒分析圖”，以圖表形式展示用戶在選定時間範圍內的情緒變化。
  - (權限) AI分析用戶筆記中的語氣並將其作為情緒數據來源的功能，僅對“專業版”用戶可用。

---

## 史詩 4: 深度洞察與高級AI (Deep Insights & Advanced AI) (Pro)

🎯 **目標**: (Pro) 激活產品的“大腦”，通過高級AI功能為用戶提供前所未有的自我洞察和自動化體驗。

### 故事 4.1: 實現回顧與數據可視化

- **用戶故事**: 作為一個用戶，我希望能通過可視化的方式回顧我的記錄，直觀地看到我的生活模式和關注點。
- **驗收標準**:
  - 應用中有一個獨立的“回顧”頁籤。
  - 提供記錄熱力圖、標籤雲、字數統計等數據圖表。
  - 實現“那年今日”和“隨機漫步”功能。

### 故事 4.2: 實現AI洞察報告 (Pro)

- **用戶故事**: 作為一個用戶，我希望能使用模板，讓AI自動為我生成結構化的複盤報告，幫我從記錄中提煉智慧。
- **驗收標準**:
  - “回顧”頁籤中有一個“AI洞察”子模塊。
  - 內置多種洞察模板（如每周複盤）。
  - 用戶可以選擇模板和時間範圍，AI會自動生成一份圖文並茂的報告。
  - 用戶可以創建和編輯自己的洞察模板。

### 故事 4.3: 實現主動式AI建議與記憶鏈 (Pro)

- **用戶故事**: 作為一個用戶，我希望AI不僅能響應我的請求，還能主動發現我記錄中的模式，給我提出有價值的建議，並將相關的記憶串聯起來。
- **驗收標準**:
  - AI能夠在後台分析用戶數據，並以通知或卡片的形式推送建議（如創建新習慣、發現認知偏誤等）。
  - 當查看一條記錄時，卡片下方會出現一個“記憶鏈”區域，展示AI找到的與此相關的其他記錄。

### 故事 4.4: 實現對話式AI助理 (Pro)

- **用戶故事**: 作為一個用戶，我希望能像和助手聊天一樣，用自然語言來查詢我的所有記錄。
- **驗收標準**:
  - 應用中提供一個對話式AI界面入口。
  - 用戶可以用自然語言提問，例如“我上週開會的所有筆記”。
  - AI能夠理解問題，並返回相關的記錄結果。

---

## 史詩 5: 連接與協作 (Connection & Collaboration)

🎯 **目標**: 打破個人記錄的孤島，引入分享、協作和數據管理功能，讓洞察和記憶得以連接和傳承。

### 故事 5.1: 實現分享與協作空間

- **用戶故事**: 作為一個用戶，我希望能將我的某些記錄分享給他人，或者和家人、團隊成員在一個共享的空間裡共同記錄。
- **驗收標準**:
  - 任何一條記錄都支持生成一個只讀的網頁鏈接或圖片進行分享。
  - 用戶可以創建“共享空間”(Space)。
  - 用戶可以邀請其他應用成員加入空間。
  - 空間內的成員可以共同發布和查看記錄。

### 故事 5.2: 實現全局搜索與國際化

- **用戶故事**: 作為一個全球用戶，我希望能用我的母語使用應用，並通過強大的搜索功能快速找到任何我想要的信息。
- **驗收標準**:
  - 實現全局全文搜索，支持高級搜索語法。
  - 應用界面支持多語言，並允許用戶在設置中手動切換。

### 故事 5.3: 實現數據導入/導出

- **用戶故事**: 作為一個重視數據所有權的用戶，我希望能自由地將我的所有數據導出備份，也能從其他筆記應用遷移進來。
- **驗收標準**:
  - 設置中提供“導出全部數據”的功能，支持Markdown、JSON等格式。
  - 設置中提供“導入數據”功能，支持從Notion、Google Keep等主流服務導入。